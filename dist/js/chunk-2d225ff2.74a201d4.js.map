{"version":3,"sources":["webpack:///./src/views/admin/purchases/Edit.vue?b4a2","webpack:///src/views/admin/purchases/Edit.vue","webpack:///./src/views/admin/purchases/Edit.vue?4740","webpack:///./src/views/admin/purchases/Edit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","on","submit","onSubmit","reset","onReset","keydown","$event","$errors","onKeydown","label","label-for","invalid-feedback","first","state","has","clearable","name","format","model","value","form","callback","$$v","$set","expression","id","type","placeholder","items","products","loading","busy","item-text","disable-filtering-by-search","select","selectedItem","scopedSlots","_u","key","fn","ref","item","staticStyle","display","align-items","src","file","width","_e","_s","code","expiredAt","price","supplier","_l","index","domProps","scope","product","height","alt","responsive","step","subTotal","variant","size","click","removeItem","colspan","total","drop-placeholder","multiple","change","handleFileSelect","input-name","goBack","staticRenderFns","proxy","PurchaseProxy","Editvue_type_script_lang_js_","props","uuid","String","Number","required","middleware","metaInfo","title","$t","scrollToTop","computed","Object","objectSpread","vuex_esm","suppliers","reduce","qty","cost","data","attachments","show","methods","_onSubmit","asyncToGenerator","regeneratorRuntime","mark","_callee","evt","wrap","_context","prev","next","preventDefault","$store","dispatch","stop","_x","apply","arguments","_this","email","description","active","$nextTick","fetchPurchase","_this2","find","then","PurchaseTransformer","fetch","$router","push","event","uploadedFiles","target","files","i","length","vm","product_id","is_new","parse_int_default","parse_float_default","toFixed","splice","mounted","_mounted","_callee2","_context2","watch","auth","authenticated","setParameters","all","destroyed","flush","purchases_Editvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d225ff2.74a201d4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"animated fadeIn\"},[_c('b-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('strong',[_vm._v(\"Purchase Edit \")]),_c('small',[_vm._v(\"Form\")])]),(_vm.show)?_c('b-form',{on:{\"submit\":_vm.onSubmit,\"reset\":_vm.onReset,\"keydown\":function($event){return _vm.$errors.onKeydown($event)}}},[_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Date:\",\"label-for\":\"date\",\"invalid-feedback\":_vm.$errors.first('date'),\"state\":!_vm.$errors.has('date')}},[_c('date-time-picker',{attrs:{\"clearable\":\"\",\"name\":\"date\",\"format\":\"DD-MM-YYYY HH:mm:ss\"},model:{value:(_vm.form.date),callback:function ($$v) {_vm.$set(_vm.form, \"date\", $$v)},expression:\"form.date\"}})],1)],1),_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Reference:\",\"label-for\":\"reference\",\"invalid-feedback\":_vm.$errors.first('reference'),\"state\":!_vm.$errors.has('reference')}},[_c('b-form-input',{attrs:{\"id\":\"reference\",\"type\":\"text\",\"state\":!_vm.$errors.has('reference'),\"placeholder\":\"Enter reference\"},model:{value:(_vm.form.reference),callback:function ($$v) {_vm.$set(_vm.form, \"reference\", $$v)},expression:\"form.reference\"}})],1)],1)],1),_c('b-form-group',{attrs:{\"label\":\"Search Product:\",\"label-for\":\"searchProduct\",\"invalid-feedback\":_vm.$errors.first('products'),\"state\":!_vm.$errors.has('products')}},[_c('vue-select',{attrs:{\"items\":_vm.products,\"loading\":_vm.$errors.busy,\"item-text\":\"name\",\"placeholder\":\"Search product by code or name and can scan by barcode\",\"disable-filtering-by-search\":\"\"},on:{\"select\":_vm.selectedItem},scopedSlots:_vm._u([{key:\"item\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[(item.file)?_c('img',{staticClass:\"logo\",attrs:{\"src\":item.file,\"width\":\"100px\"}}):_vm._e(),_c('div',{staticClass:\"product-detail\"},[_c('span',{staticClass:\"item-name\"},[_vm._v(\"Name: \"+_vm._s(item.name)+\" \")]),_c('br'),_c('span',{staticClass:\"item-name\"},[_vm._v(\"Engine: \"+_vm._s(item.code)+\" \")]),_c('br'),_c('span',{staticClass:\"item-domain\"},[_vm._v(\"Frame \"+_vm._s(item.expiredAt)+\" \")]),_c('br'),_c('span',{staticClass:\"item-domain\"},[_vm._v(\"Price \"+_vm._s(item.price)+\" \")])])])]}}],null,false,949586475),model:{value:(_vm.supplier),callback:function ($$v) {_vm.supplier=$$v},expression:\"supplier\"}},[_vm._v(\" // @search=\\\"setQuery\\\"\\n          \"),_c('template',{slot:\"no-data\"},[_vm._v(\"\\n            We need at least 2 letters to search.\\n          \")])],2)],1),_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Supplier:\",\"label-for\":\"supplier\",\"invalid-feedback\":_vm.$errors.first('supplier_id'),\"state\":!_vm.$errors.has('supplier_id')}},[_c('b-form-select',{attrs:{\"state\":!_vm.$errors.has('supplier_id')},model:{value:(_vm.form.supplierId),callback:function ($$v) {_vm.$set(_vm.form, \"supplierId\", $$v)},expression:\"form.supplierId\"}},_vm._l((_vm.suppliers),function(supplier,index){return _c('option',{key:(\"supplier-\" + index),domProps:{\"value\":supplier.id}},[_vm._v(\"\\n                \"+_vm._s(supplier.name)+\"\\n              \")])}),0)],1)],1),_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Received:\",\"label-for\":\"received\",\"invalid-feedback\":_vm.$errors.first('received'),\"state\":!_vm.$errors.has('received')}},[_c('b-form-select',{attrs:{\"state\":!_vm.$errors.has('received')},model:{value:(_vm.form.received),callback:function ($$v) {_vm.$set(_vm.form, \"received\", $$v)},expression:\"form.received\"}},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"Received\")]),_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"Not Received\")])])],1)],1)],1),_c('div',{staticClass:\"table-responsive\"},[_c('table',{staticClass:\"table table-bordered table-hover\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"#\")]),_c('th',{attrs:{\"scope\":\"col\"}}),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Product\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Qty\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Cost\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Sub total\")]),_c('th',{attrs:{\"scope\":\"col\"}})])]),_c('tbody',[_vm._l((_vm.form.products),function(product,index){return _c('tr',{key:(\"product-\" + index)},[_c('th',{attrs:{\"scope\":\"row\"}},[_vm._v(_vm._s(index + 1))]),_c('th',[_c('b-img-lazy',{attrs:{\"src\":product.file,\"width\":\"30\",\"height\":\"30\",\"alt\":product.name,\"responsive\":\"\"}})],1),_c('td',[_vm._v(_vm._s(product.name))]),_c('td',[_c('b-form-input',{attrs:{\"id\":\"product-qty\",\"type\":\"number\",\"state\":!_vm.$errors.has('form.products[index].qty'),\"placeholder\":\"Enter product qty\",\"step\":\".01\"},model:{value:(_vm.form.products[index].qty),callback:function ($$v) {_vm.$set(_vm.form.products[index], \"qty\", $$v)},expression:\"form.products[index].qty\"}})],1),_c('td',[_c('b-form-input',{attrs:{\"id\":\"product-cost\",\"type\":\"number\",\"state\":!_vm.$errors.has('form.products[index].cost'),\"placeholder\":\"Enter product cost\",\"step\":\".01\"},model:{value:(_vm.form.products[index].cost),callback:function ($$v) {_vm.$set(_vm.form.products[index], \"cost\", $$v)},expression:\"form.products[index].cost\"}})],1),_c('td',[_vm._v(_vm._s(_vm.subTotal(product)))]),_c('td',[_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"danger\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.removeItem(index)}}},[_c('i',{staticClass:\"fa fa-trash-o\"})])],1)])}),_c('tr',[_c('th',{attrs:{\"colspan\":\"4\"}},[_vm._v(\"Total\")]),_c('td',{attrs:{\"colspan\":\"3\"}},[_vm._v(_vm._s(_vm.total))])])],2)])]),_c('b-form-group',{attrs:{\"label\":\"Attachments:\",\"label-for\":\"attachments\",\"invalid-feedback\":_vm.$errors.first('attachments'),\"state\":!_vm.$errors.has('attachments')}},[_c('b-form-file',{attrs:{\"placeholder\":\"Choose a file...\",\"drop-placeholder\":\"Drop file here...\",\"state\":!_vm.$errors.has('attachments'),\"multiple\":\"\",\"name\":\"attachments\"},on:{\"change\":_vm.handleFileSelect}})],1),_c('b-form-group',{attrs:{\"label\":\"Notes:\",\"label-for\":\"notes\",\"invalid-feedback\":_vm.$errors.first('notes'),\"state\":!_vm.$errors.has('notes')}},[_c('textarea-autosize',{attrs:{\"input-name\":\"notes\",\"placeholder\":\"Enter notes\"},model:{value:(_vm.form.notes),callback:function ($$v) {_vm.$set(_vm.form, \"notes\", $$v)},expression:\"form.notes\"}})],1),_c('v-button',{on:{\"click\":_vm.goBack}})],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"animated fadeIn\">\n    <b-card>\n      <div slot=\"header\">\n        <strong>Purchase Edit </strong>\n        <small>Form</small>\n      </div>\n      <b-form @submit=\"onSubmit\" @reset=\"onReset\" v-if=\"show\" @keydown=\"$errors.onKeydown($event)\">\n        <b-row>\n          <b-col>\n            <b-form-group label=\"Date:\"\n                          label-for=\"date\"\n                          :invalid-feedback=\"$errors.first('date')\"\n                          :state=\"!$errors.has('date')\"\n            >\n              <date-time-picker v-model=\"form.date\"\n                                clearable\n                                name=\"date\"\n                                format=\"DD-MM-YYYY HH:mm:ss\"\n              ></date-time-picker>\n\n            </b-form-group>\n          </b-col>\n          <b-col>\n            <b-form-group label=\"Reference:\"\n                          label-for=\"reference\"\n                          :invalid-feedback=\"$errors.first('reference')\"\n                          :state=\"!$errors.has('reference')\"\n            >\n              <b-form-input id=\"reference\"\n                            type=\"text\"\n                            v-model=\"form.reference\"\n                            :state=\"!$errors.has('reference')\"\n                            placeholder=\"Enter reference\"\n              >\n              </b-form-input>\n            </b-form-group>\n          </b-col>\n        </b-row>\n\n        <b-form-group label=\"Search Product:\"\n                      label-for=\"searchProduct\"\n                      :invalid-feedback=\"$errors.first('products')\"\n                      :state=\"!$errors.has('products')\"\n        >\n          <vue-select v-model=\"supplier\"\n                      :items=\"products\"\n                      :loading=\"$errors.busy\"\n                      item-text=\"name\"\n                      placeholder=\"Search product by code or name and can scan by barcode\"\n                      disable-filtering-by-search\n                      @select=\"selectedItem\"\n          > // @search=\"setQuery\"\n            <template slot=\"no-data\">\n              We need at least 2 letters to search.\n            </template>\n            <template slot=\"item\" slot-scope=\"{ item }\">\n              <div style=\"display: flex; align-items: center;\">\n                <img v-if=\"item.file\" :src=\"item.file\" class=\"logo\" width=\"100px\"/>\n                <div class=\"product-detail\">\n                  <span class=\"item-name\">Name: {{ item.name }} </span><br/>\n                  <span class=\"item-name\">Engine: {{ item.code }} </span><br/>\n                  <span class=\"item-domain\">Frame {{ item.expiredAt }} </span><br>\n                  <span class=\"item-domain\">Price {{ item.price }} </span>\n                </div>\n              </div>\n            </template>\n          </vue-select>\n\n        </b-form-group>\n\n        <b-row>\n          <b-col>\n            <b-form-group label=\"Supplier:\"\n                          label-for=\"supplier\"\n                          :invalid-feedback=\"$errors.first('supplier_id')\"\n                          :state=\"!$errors.has('supplier_id')\"\n            >\n              <b-form-select :state=\"!$errors.has('supplier_id')\" v-model=\"form.supplierId\">\n                <option v-for=\"(supplier,index) in suppliers\" :value=\"supplier.id\" :key=\"`supplier-${index}`\">\n                  {{ supplier.name }}\n                </option>\n              </b-form-select>\n\n            </b-form-group>\n          </b-col>\n          <b-col>\n            <b-form-group label=\"Received:\"\n                          label-for=\"received\"\n                          :invalid-feedback=\"$errors.first('received')\"\n                          :state=\"!$errors.has('received')\"\n            >\n              <b-form-select :state=\"!$errors.has('received')\" v-model=\"form.received\">\n                <option value=\"1\">Received</option>\n                <option value=\"0\">Not Received</option>\n              </b-form-select>\n            </b-form-group>\n          </b-col>\n        </b-row>\n        <div class=\"table-responsive\">\n          <table class=\"table table-bordered table-hover\">\n            <thead>\n            <tr>\n              <th scope=\"col\">#</th>\n              <th scope=\"col\"></th>\n              <th scope=\"col\">Product</th>\n              <th scope=\"col\">Qty</th>\n              <th scope=\"col\">Cost</th>\n              <th scope=\"col\">Sub total</th>\n              <th scope=\"col\"></th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr v-for=\"(product,index) in form.products\" :key=\"`product-${index}`\">\n              <th scope=\"row\">{{ index + 1 }}</th>\n              <th>\n                <b-img-lazy :src=\"product.file\" width=\"30\" height=\"30\" :alt=\"product.name\" responsive></b-img-lazy>\n              </th>\n              <td>{{ product.name }}</td>\n              <td>\n                <b-form-input id=\"product-qty\"\n                              type=\"number\"\n                              v-model=\"form.products[index].qty\"\n                              :state=\"!$errors.has('form.products[index].qty')\"\n                              placeholder=\"Enter product qty\"\n                              step=\".01\"\n                >\n                </b-form-input>\n              </td>\n              <td>\n                <b-form-input id=\"product-cost\"\n                              type=\"number\"\n                              v-model=\"form.products[index].cost\"\n                              :state=\"!$errors.has('form.products[index].cost')\"\n                              placeholder=\"Enter product cost\"\n                              step=\".01\"\n                >\n                </b-form-input>\n              </td>\n              <td>{{ subTotal(product) }}</td>\n              <td>\n                <b-button type=\"button\" variant=\"danger\" @click=\"removeItem(index)\" size=\"sm\">\n                  <i class=\"fa fa-trash-o\"></i>\n                </b-button>\n              </td>\n            </tr>\n            <tr>\n              <th colspan=\"4\">Total</th>\n              <td colspan=\"3\">{{ total }}</td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n\n        <b-form-group label=\"Attachments:\"\n                      label-for=\"attachments\"\n                      :invalid-feedback=\"$errors.first('attachments')\"\n                      :state=\"!$errors.has('attachments')\"\n        >\n          <b-form-file @change=\"handleFileSelect\"\n                       placeholder=\"Choose a file...\"\n                       drop-placeholder=\"Drop file here...\"\n                       :state=\"!$errors.has('attachments')\"\n                       multiple\n                       name=\"attachments\"\n          />\n        </b-form-group>\n\n        <b-form-group label=\"Notes:\"\n                      label-for=\"notes\"\n                      :invalid-feedback=\"$errors.first('notes')\"\n                      :state=\"!$errors.has('notes')\"\n        >\n          <textarea-autosize v-model=\"form.notes\"\n                             input-name=\"notes\"\n                             placeholder=\"Enter notes\"\n          ></textarea-autosize>\n        </b-form-group>\n\n        <v-button @click=\"goBack\"></v-button>\n\n      </b-form>\n    </b-card>\n  </div>\n</template>\n\n<script>\n  import { mapGetters } from 'vuex'\n  import PurchaseProxy from '@/proxies/PurchaseProxy'\n  import PurchaseTransformer from '@/transformers/PurchaseTransformer'\n\n  const proxy = new PurchaseProxy()\n\n  export default {\n    /**\n     * The properties that can be used.\n     */\n    props: {\n      /**\n       * The given group identifier.\n       */\n      uuid: {\n        type: [String, Number],\n        required: true\n      }\n    },\n    name: 'PurchaseEdit',\n    middleware: 'auth',\n    metaInfo () {\n      return { title: this.$t('settings') }\n    },\n    scrollToTop: true,\n    computed: {\n      ...mapGetters({\n        'suppliers': 'supplier/all',\n        'products': 'product/all'\n      }),\n      total () {\n        return this.form.products.reduce((total, item) => {\n          return total + item.qty * item.cost\n        }, 0)\n      }\n    },\n    data () {\n      return {\n        form: { attachments: [], products: [] },\n        show: true,\n        supplier: {}\n      }\n    },\n    methods: {\n      async onSubmit (evt) {\n        evt.preventDefault()\n        await this.$store.dispatch('purchase/update', this.form)\n      },\n      onReset (evt) {\n        evt.preventDefault();\n        this.form.email = ''\n        this.form.description = ''\n        this.form.active = true\n        this.show = false\n        this.$nextTick(() => {\n          this.show = true\n        })\n      },\n      /**\n       * Method used to fetch an purchase.\n       *\n       * @param {groupId|{type, required}} id The id of the purchase.\n       */\n      fetchPurchase (id) {\n        proxy.find(id)\n          .then((data) => {\n            this.form = PurchaseTransformer.fetch(data)\n            this.show = true\n          })\n      },\n      goBack () {\n        this.$router.push({ name: 'purchase.index' })\n      },\n      handleFileSelect (event) {\n        /*\n          Get the uploaded files from the input.\n        */\n        let uploadedFiles = event.target.files;\n\n        /*\n          Adds the uploaded file to the files array\n        */\n        for (let i = 0; i < uploadedFiles.length; i++) {\n          this.form.attachments.push(uploadedFiles[i]);\n        }\n      },\n      /**\n       * The method used to push select product\n       */\n      selectedItem (item) {\n        let vm = this\n        vm.form.products.push({\n          qty: 1,\n          cost: item.cost,\n          name: item.name,\n          file: item.file,\n          product_id: item.id,\n          is_new: true\n        })\n      },\n      subTotal (item) {\n        return (parseInt(item.qty) * parseFloat(item.cost)).toFixed(2)\n      },\n      removeItem (index) {\n        this.form.products.splice(index, 1)\n      }\n    },\n    /**\n     * This method will be fired once the application has been mounted.\n     */\n    async mounted () {\n      const vm = this\n      await vm.$store.watch((state) => {\n        if (state.auth.authenticated) {\n          vm.fetchPurchase(vm.uuid)\n          vm.$store.dispatch('supplier/all', (proxy) => {\n            proxy.setParameters({ 'all': true })\n          })\n          vm.$store.dispatch('product/all', (proxy) => {\n            proxy.setParameters({ 'all': true })\n          })\n        }\n      })\n    },\n    destroyed () {\n      this.$errors.flush()\n    }\n  }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=60651849&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}