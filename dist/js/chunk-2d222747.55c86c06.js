(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d222747"],{cf4b:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"animated fadeIn"},[t("b-form",{on:{submit:e.onSubmit,reset:e.onReset,keydown:function(r){return e.$errors.onKeydown(r)}}},[t("b-card",{attrs:{"border-variant":"info",header:"Secondary","header-border-variant":"info",align:"left"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("strong",[e._v("User Edit ")]),t("small",[e._v("Form")])]),t("div",{staticClass:"avatar-upload"},[t("div",{staticClass:"avatar-edit",attrs:{id:"pick-avatar"}},[t("label",{attrs:{for:"pick-avatar"}})]),t("div",{staticClass:"avatar-preview"},[t("div",{style:{"background-image":"url("+e.form.avatarUrl+")"},attrs:{id:"imagePreview"}})]),t("image-cropper",{ref:"avatarPicker",attrs:{trigger:"#pick-avatar","upload-handler":e.submitFile}})],1),t("b-form-group",{attrs:{label:"Name:","label-for":"name","invalid-feedback":e.$errors.first("name")}},[t("b-form-input",{attrs:{type:"text",placeholder:"Enter name",state:!e.$errors.has("name"),name:"name"},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("b-form-group",{attrs:{label:"Email:","label-for":"email","invalid-feedback":e.$errors.first("email")}},[t("b-form-input",{attrs:{type:"email",placeholder:"Enter email",state:!e.$errors.has("email"),name:"email"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),t("b-form-group",{attrs:{label:"Phone Number:","label-for":"phoneNumber","invalid-feedback":e.$errors.first("phone_number")}},[t("b-form-input",{attrs:{type:"tel",placeholder:"Enter phone number",state:!e.$errors.has("phone_number"),name:"phone_number"},model:{value:e.form.phoneNumber,callback:function(r){e.$set(e.form,"phoneNumber",r)},expression:"form.phoneNumber"}})],1),t("b-form-group",{staticClass:"mb-2",attrs:{"label-cols-sm":"2",label:"Gender:","label-align-sm":"left","invalid-feedback":e.$errors.first("gender"),"label-for":"gender",state:!e.$errors.has("gender")}},[t("b-form-radio-group",{staticClass:"pt-2",attrs:{options:e.gender,state:!e.$errors.has("gender")},model:{value:e.form.gender,callback:function(r){e.$set(e.form,"gender",r)},expression:"form.gender"}})],1),t("b-form-group",{attrs:{label:"Date Of Birth:","label-for":"dateOfBirth","invalid-feedback":e.$errors.first("date_of_birth")}},[t("date-time-picker",{attrs:{clearable:"",name:"date_of_birth","disabled-date":e.disabledDate},model:{value:e.form.dateOfBirth,callback:function(r){e.$set(e.form,"dateOfBirth",r)},expression:"form.dateOfBirth"}})],1),t("b-form-group",{attrs:{label:"Start working date:","label-for":"startWorkingDate","invalid-feedback":e.$errors.first("start_working_date")}},[t("date-time-picker",{attrs:{clearable:"",name:"start_working_date","disabled-date":e.disabledDate},model:{value:e.form.startWorkingDate,callback:function(r){e.$set(e.form,"startWorkingDate",r)},expression:"form.startWorkingDate"}})],1),t("b-form-group",{attrs:{label:"Address:","label-for":"address","invalid-feedback":e.$errors.first("address")}},[t("textarea-autosize",{attrs:{"input-name":"address",placeholder:"Enter address"},model:{value:e.form.address,callback:function(r){e.$set(e.form,"address",r)},expression:"form.address"}})],1),t("b-form-group",{attrs:{label:"Roles:","invalid-feedback":e.$errors.first("roles"),"label-for":"roles",state:!e.$errors.has("roles")}},[t("b-form-checkbox-group",{attrs:{id:"roles",name:"roles",state:!e.$errors.has("roles")},model:{value:e.form.roles,callback:function(r){e.$set(e.form,"roles",r)},expression:"form.roles"}},e._l(e.role.all,function(r,a){return t("b-form-checkbox",{key:"role-index-"+a,staticClass:"mb-2",attrs:{value:r.name}},[e._v("\n            "+e._s(r.name)+"\n          ")])}),1)],1),t("b-form-group",{attrs:{"invalid-feedback":e.$errors.first("permissions"),state:!e.$errors.has("permissions")}},[t("template",{slot:"label"},[t("h6",[e._v("Choose Your Permissions:")]),t("b-form-checkbox",{attrs:{switch:"",indeterminate:e.indeterminate,"aria-describedby":"permissions","aria-controls":"permissions"},on:{change:e.toggleAll},model:{value:e.allSelected,callback:function(r){e.allSelected=r},expression:"allSelected"}},[e._v("\n            "+e._s(e.allSelected?"Un-select All":"Select All")+"\n          ")])],1),t("b-form-checkbox-group",{staticClass:"ml-3",attrs:{id:"permissions",switches:"",name:"permissions","aria-label":"Individual Permissions",state:!e.$errors.has("permissions")},model:{value:e.form.permissions,callback:function(r){e.$set(e.form,"permissions",r)},expression:"form.permissions"}},e._l(e.permission.all,function(r,a){return t("b-form-checkbox",{key:"permission-index-"+a,staticClass:"mb-2",attrs:{value:r.name}},[e._v("\n            "+e._s(e._f("removeHyphen")(r.name))+"\n          ")])}),1)],2),t("b-form-group",{attrs:{id:"activeGroup",label:"Active:"}},[t("b-form-checkbox",{attrs:{switch:""},model:{value:e.form.active,callback:function(r){e.$set(e.form,"active",r)},expression:"form.active"}},[e._v("Active")])],1),t("v-button",{on:{click:e.goBack}})],1)],1)],1)},s=[],n=(t("7f7f"),t("7514"),t("96cf"),t("3b8d")),o=t("cebc"),i=(t("c5f6"),t("2f62")),l=t("281a"),c=t("67cf"),m=new l["a"],d={props:{uuid:{type:[String,Number],required:!0}},name:"UserEdit",middleware:"auth",metaInfo:function(){return{title:this.$t("settings")}},scrollToTop:!0,computed:Object(o["a"])({},Object(i["c"])(["role","permission"])),data:function(){return{form:{},show:!0,gender:[{value:1,text:"Male"},{value:2,text:"Female"}],allSelected:!1,indeterminate:!1}},methods:{onSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,this.$store.dispatch("user/update",this.form);case 3:case"end":return e.stop()}},e,this)}));function r(r){return e.apply(this,arguments)}return r}(),onReset:function(e){var r=this;e.preventDefault(),r.show=!1,r.$nextTick(function(){r.show=!0,r.fetchUser(r.uuid)})},fetchUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,m.find(r).then(function(e){t.form=c["a"].fetch(e),t.show=!0});case 3:case"end":return e.stop()}},e,this)}));function r(r){return e.apply(this,arguments)}return r}(),goBack:function(){this.$router.push({name:"user.index"})},disabledDate:function(e){return e>this.$moment()},submitFile:function(e){this.form.avatarUrl=e.getCroppedCanvas().toDataURL("image/png")},toggleAll:function(e){var r=this;r.form.permissions=e?r.permission.all.map(function(e){return e.name}):[]}},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this,e.next=3,r.$store.watch(function(e){e.auth.authenticated&&(r.fetchUser(r.uuid),r.$store.dispatch("role/all",function(e){e.removeParameters(["page","q","direction","sort"])}),r.$store.dispatch("permission/all",function(e){e.removeParameters(["page","q","direction","sort"])}))});case 3:case"end":return e.stop()}},e,this)}));function r(){return e.apply(this,arguments)}return r}(),watch:{"form.permissions":function(e,r){0===e.length?(this.indeterminate=!1,this.allSelected=!1):e.length===this.permission.all.length?(this.indeterminate=!1,this.allSelected=!0):(this.indeterminate=!0,this.allSelected=!1)}},destroyed:function(){this.$errors.flush()}},f=d,u=t("2877"),p=Object(u["a"])(f,a,s,!1,null,null,null);r["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d222747.55c86c06.js.map